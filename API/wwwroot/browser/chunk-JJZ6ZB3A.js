import{a as B,b as u,c as M,d as T,e as U,f as V,g as j,h as L,i as A,j as D,k as q}from"./chunk-VWK2SJE6.js";import{$ as xe,A as J,Ba as P,Ca as N,D as p,E as l,F as S,G as r,H as o,I as f,L as x,M as b,N as v,Q as X,R as Y,S as ee,U as s,V as Se,Y as E,_ as ye,c as O,h as w,ha as te,ja as I,la as Ce,na as ie,o as F,s as h,t as _,ta as k,va as R,w as H,wa as re,y as m,z as d,za as ne}from"./chunk-GLEX32WT.js";var z=class{accessToken;userId;provider;constructor(e,t,i){this.accessToken=e,this.userId=t,this.provider=i}};var oe={production:!1,apiUrl:"http://localhost:5000/api/",userKey:"identity",googleClientId:"2066032109-mfsf1cs7a0ki15romdlc2t1jggj2emer.apps.googleusercontent.com",facebookAppId:""};var we=["googleButton"];function Fe(n,e){n&1&&(r(0,"span",26),s(1," Username is required "),o())}function Ee(n,e){n&1&&(r(0,"span",26),s(1," Password is required "),o())}function Ie(n,e){if(n&1){let t=x();r(0,"a",30),b("click",function(){h(t);let a=v(2);return _(a.resendEmailConfirmationLink())}),s(1," Click here to resend email confirmation link in case you didn't receive it. "),o()}}function Re(n,e){if(n&1&&(r(0,"div",27),f(1,"app-validation-messages",28),p(2,Ie,2,0,"a",29),o()),n&2){let t=v();m(),l("errorMessages",t.errorMessages),m(),l("ngIf",t.errorMessages[0].includes("Please confirm your email"))}}var ae=class n{constructor(e,t,i,a,c,C,y){this.accountService=e;this.formBuilder=t;this.router=i;this.activatedRoute=a;this.sharedService=c;this._renderer2=C;this._document=y;this.accountService.user$.pipe(w(1)).subscribe({next:g=>{g?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe({next:G=>{G&&(this.returnUrl=G.get("returnUrl"))}})}})}googleButton=new H({});loginForm=new U({});submitted=!1;errorMessages=[];returnUrl=null;ngOnInit(){this.initiazeGoogleButton(),this.initializeForm()}ngAfterViewInit(){let e=this._renderer2.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async="true",e.defer="true",this._renderer2.appendChild(this._document.body,e)}initializeForm(){this.loginForm=this.formBuilder.group({userName:["",u.required],password:["",u.required]})}login(){this.submitted=!0,this.errorMessages=[],this.loginForm.valid&&this.accountService.login(this.loginForm.value).subscribe({next:e=>{this.returnUrl?this.router.navigateByUrl(this.returnUrl):this.router.navigateByUrl("/")},error:e=>{e.error.errors?this.errorMessages=e.error.errors:this.errorMessages.push(e.error)}})}loginWithFacebook(){FB.login(e=>O(this,null,function*(){if(e.authResponse){let t=e.authResponse.accessToken,i=e.authResponse.userID;this.accountService.loginWithThirdParty(new z(t,i,"facebook")).subscribe({next:()=>{this.returnUrl?this.router.navigateByUrl(this.returnUrl):this.router.navigateByUrl("/")},error:a=>{this.sharedService.showNotification(!1,"Failed",a.error)}})}else this.sharedService.showNotification(!1,"Failed","Unable to login with your facebook")}))}resendEmailConfirmationLink(){this.router.navigateByUrl("/account/send-email/resend-email-confirmation-link")}initiazeGoogleButton(){window.onGoogleLibraryLoad=()=>{google.accounts.id.initialize({client_id:oe.googleClientId,callback:this.googleCallBack.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),google.accounts.id.renderButton(this.googleButton.nativeElement,{size:"medium",shape:"rectangular",text:"signin_with",logo_alignment:"center"})}}googleCallBack(e){return O(this,null,function*(){let t=ne(e.credential);this.accountService.loginWithThirdParty(new z(e.credential,t.sub,"google")).subscribe({next:i=>{this.returnUrl?this.router.navigateByUrl(this.returnUrl):this.router.navigateByUrl("/")},error:i=>{this.sharedService.showNotification(!1,"Failed",i.error)}})})}static \u0275fac=function(t){return new(t||n)(d(N),d(A),d(R),d(k),d(P),d(J),d(te))};static \u0275cmp=F({type:n,selectors:[["app-login"]],viewQuery:function(t,i){if(t&1&&X(we,7),t&2){let a;Y(a=ee())&&(i.googleButton=a.first)}},standalone:!0,features:[E],decls:42,vars:8,consts:[["googleButton",""],[1,"mt-5"],[1,"d-flex","justify-content-center"],[1,"card","col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"ngSubmit","formGroup"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"form-floating","mb-3"],["formControlName","userName","type","text","placeholder","Username (your email address)",1,"form-control"],["for","userName"],["class","text-danger",4,"ngIf"],["formControlName","password","type","password","placeholder","Password",1,"form-control"],["for","password"],["class","form-floatin",4,"ngIf"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],[1,"mt-4","text-center"],["routerLink","/account/send-email/forgot-username-or-password",1,"btn","btn-link"],[1,"row","d-flex","justify-content-center","mt-3"],[1,"col-5"],[1,"col-2","text-center"],[1,"d-flex","justify-content-between","my-3"],[1,"btn","btn-primary","btn-sm",2,"width","180px",3,"click"],[1,"font-monospace","fw-medium","text-center","text-muted","mt-2","mb-0"],["routerLink","/account/register",1,"text-decoration-none"],[1,"text-danger"],[1,"form-floatin"],[3,"errorMessages"],["class","btn btn-link",3,"click",4,"ngIf"],[1,"btn","btn-link",3,"click"]],template:function(t,i){if(t&1){let a=x();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"main",4)(4,"form",5),b("ngSubmit",function(){return h(a),_(i.login())}),r(5,"div",6)(6,"h3",7),s(7,"Sign in"),o()(),r(8,"div",8),f(9,"input",9),r(10,"label",10),s(11,"Username (your email address)"),o(),p(12,Fe,2,0,"span",11),o(),r(13,"div",8),f(14,"input",12),r(15,"label",13),s(16,"Password"),o(),p(17,Ee,2,0,"span",11),o(),p(18,Re,3,2,"div",14),r(19,"div",15)(20,"button",16),s(21,"Log in"),o()()(),r(22,"div",17)(23,"a",18)(24,"h6"),s(25,"Forgot username or password"),o()()(),r(26,"div",19)(27,"div",20),f(28,"hr"),o(),r(29,"div",21),s(30,"OR"),o(),r(31,"div",20),f(32,"hr"),o()(),r(33,"div",22),f(34,"div",null,0),r(36,"button",23),b("click",function(){return h(a),_(i.loginWithFacebook())}),s(37," Facebook "),o()(),r(38,"p",24),s(39," Don't have an account yet? "),r(40,"a",25),s(41,"Create account"),o()()()()()()}if(t&2){let a,c,C,y;m(4),l("formGroup",i.loginForm),m(5),S("is-invalid",i.submitted&&((a=i.loginForm.get("userName"))==null?null:a.errors)),m(3),l("ngIf",i.submitted&&((c=i.loginForm.get("userName"))==null?null:c.hasError("required"))),m(2),S("is-invalid",i.submitted&&((C=i.loginForm.get("userName"))==null?null:C.errors)),m(3),l("ngIf",i.submitted&&((y=i.loginForm.get("password"))==null?null:y.hasError("required"))),m(),l("ngIf",i.errorMessages.length>0)}},dependencies:[D,V,B,M,T,j,L,I,q,re]})};var Ne=["googleButton"];function ke(n,e){n&1&&(r(0,"span",8),s(1," First name is required "),o())}function Pe(n,e){n&1&&(r(0,"span",8),s(1," First name must be at least 3, and maximum 15 characters "),o())}function Be(n,e){n&1&&(r(0,"span",8),s(1," Last name is required "),o())}function Me(n,e){n&1&&(r(0,"span",8),s(1," Last name must be at least 3, and maximum 15 characters "),o())}function Te(n,e){n&1&&(r(0,"span",8),s(1," Email is required "),o())}function Ue(n,e){n&1&&(r(0,"span",8),s(1," Invalid email address "),o())}function Ve(n,e){n&1&&(r(0,"span",8),s(1," Password is required "),o())}function je(n,e){n&1&&(r(0,"span",8),s(1," Password must be at least 6, and maximum 15 characters "),o())}function Le(n,e){if(n&1&&(r(0,"div",29),f(1,"app-validation-messages",30),o()),n&2){let t=v();m(),l("errorMessages",t.errorMessages)}}var le=class n{constructor(e,t,i,a,c,C){this.accountService=e;this.sharedService=t;this.formBuilder=i;this.router=a;this._renderer2=c;this._document=C;this.accountService.user$.pipe(w(1)).subscribe({next:y=>{y&&this.router.navigateByUrl("/")}})}googleButton=new H({});registerForm=new U({});submitted=!1;errorMessages=[];ngOnInit(){this.initiazeGoogleButton(),this.initializeForm()}ngAfterViewInit(){let e=this._renderer2.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async="true",e.defer="true",this._renderer2.appendChild(this._document.body,e)}initializeForm(){this.registerForm=this.formBuilder.group({firstName:["",[u.required,u.minLength(3),u.maxLength(15)]],lastName:["",[u.required,u.minLength(3),u.maxLength(15)]],email:["",[u.required,u.pattern("^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$")]],password:["",[u.required,u.minLength(6),u.maxLength(15)]]})}register(){this.submitted=!0,this.errorMessages=[],this.registerForm.valid&&this.accountService.register(this.registerForm.value).subscribe({next:e=>{this.sharedService.showNotification(!0,e.value.title,e.value.message),this.router.navigateByUrl("/account/login")},error:e=>{e.error.errors?this.errorMessages=e.error.errors:this.errorMessages.push(e.error)}})}registerWithFacebook(){FB.login(e=>O(this,null,function*(){if(e.authResponse){let t=e.authResponse.accessToken,i=e.authResponse.userID;this.router.navigateByUrl(`/account/register/third-party/facebook?access_token=${t}&userId=${i}`)}else this.sharedService.showNotification(!1,"Failed","Unable to register with your facebook")}))}initiazeGoogleButton(){window.onGoogleLibraryLoad=()=>{google.accounts.id.initialize({client_id:oe.googleClientId,callback:this.googleCallBack.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),google.accounts.id.renderButton(this.googleButton.nativeElement,{size:"medium",shape:"rectangular",text:"signup_with",logo_alignment:"center"})}}googleCallBack(e){return O(this,null,function*(){let t=ne(e.credential);this.router.navigateByUrl(`/account/register/third-party/google?access_token=${e.credential}&userId=${t.sub}`)})}static \u0275fac=function(t){return new(t||n)(d(N),d(P),d(A),d(R),d(J),d(te))};static \u0275cmp=F({type:n,selectors:[["app-register"]],viewQuery:function(t,i){if(t&1&&X(Ne,7),t&2){let a;Y(a=ee())&&(i.googleButton=a.first)}},standalone:!0,features:[E],decls:54,vars:18,consts:[["googleButton",""],[1,"mt-5"],[1,"d-flex","justify-content-center"],[1,"card","col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"ngSubmit","formGroup"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"text-danger"],[1,"form-floating","mb-3"],["formControlName","firstName","type","text","placeholder","First name",1,"form-control"],["for","firstName"],["class","text-danger",4,"ngIf"],["formControlName","lastName","type","text","placeholder","Last name",1,"form-control"],["for","lastName"],["formControlName","email","type","text","placeholder","Email",1,"form-control"],["for","email"],["formControlName","password","type","password","placeholder","Password",1,"form-control"],["for","password"],["class","form-floatin",4,"ngIf"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],[1,"row","d-flex","justify-content-center","mt-3"],[1,"col-5"],[1,"col-2","text-center"],[1,"d-flex","justify-content-between","my-3"],[1,"btn","btn-primary","btn-sm",2,"width","180px",3,"click"],[1,"font-monospace","fw-medium","text-center","text-muted","mt-2","mb-0"],["routerLink","/account/login",1,"text-decoration-none"],[1,"form-floatin"],[3,"errorMessages"]],template:function(t,i){if(t&1){let a=x();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"main",4)(4,"form",5),b("ngSubmit",function(){return h(a),_(i.register())}),r(5,"div",6)(6,"h3",7),s(7," Sign up for free "),r(8,"span",8),s(9,"Today"),o()()(),r(10,"div",9),f(11,"input",10),r(12,"label",11),s(13,"First name"),o(),p(14,ke,2,0,"span",12)(15,Pe,2,0,"span",12),o(),r(16,"div",9),f(17,"input",13),r(18,"label",14),s(19,"Last name"),o(),p(20,Be,2,0,"span",12)(21,Me,2,0,"span",12),o(),r(22,"div",9),f(23,"input",15),r(24,"label",16),s(25,"Email"),o(),p(26,Te,2,0,"span",12)(27,Ue,2,0,"span",12),o(),r(28,"div",9),f(29,"input",17),r(30,"label",18),s(31,"Password"),o(),p(32,Ve,2,0,"span",12)(33,je,2,0,"span",12),o(),p(34,Le,2,1,"div",19),r(35,"div",20)(36,"button",21),s(37," Create Account "),o()()(),r(38,"div",22)(39,"div",23),f(40,"hr"),o(),r(41,"div",24),s(42,"OR"),o(),r(43,"div",23),f(44,"hr"),o()(),r(45,"div",25),f(46,"div",null,0),r(48,"button",26),b("click",function(){return h(a),_(i.registerWithFacebook())}),s(49," Facebook "),o()(),r(50,"p",27),s(51," Already have an account? "),r(52,"a",28),s(53,"Login"),o()()()()()()}if(t&2){let a,c,C,y,g,G,ge,ve,he,_e,be,K;m(4),l("formGroup",i.registerForm),m(7),S("is-invalid",i.submitted&&((a=i.registerForm.get("firstName"))==null?null:a.errors)),m(3),l("ngIf",i.submitted&&((c=i.registerForm.get("firstName"))==null?null:c.hasError("required"))),m(),l("ngIf",i.submitted&&((C=i.registerForm.get("firstName"))==null?null:C.hasError("minlength"))||((C=i.registerForm.get("firstName"))==null?null:C.hasError("maxlength"))),m(2),S("is-invalid",i.submitted&&((y=i.registerForm.get("lastName"))==null?null:y.errors)),m(3),l("ngIf",i.submitted&&((g=i.registerForm.get("lastName"))==null?null:g.hasError("required"))),m(),l("ngIf",i.submitted&&((G=i.registerForm.get("lastName"))==null?null:G.hasError("minlength"))||((G=i.registerForm.get("lastName"))==null?null:G.hasError("maxlength"))),m(2),S("is-invalid",i.submitted&&((ge=i.registerForm.get("email"))==null?null:ge.errors)),m(3),l("ngIf",i.submitted&&((ve=i.registerForm.get("email"))==null?null:ve.hasError("required"))),m(),l("ngIf",i.submitted&&((he=i.registerForm.get("email"))==null?null:he.hasError("pattern"))),m(2),S("is-invalid",i.submitted&&((_e=i.registerForm.get("password"))==null?null:_e.errors)),m(3),l("ngIf",i.submitted&&((be=i.registerForm.get("password"))==null?null:be.hasError("required"))),m(),l("ngIf",i.submitted&&((K=i.registerForm.get("password"))==null?null:K.hasError("minlength"))||((K=i.registerForm.get("password"))==null?null:K.hasError("maxlength"))),m(),l("ngIf",i.errorMessages.length>0)}},dependencies:[q,I,D,V,B,M,T,j,L,re]})};function Ae(n,e){if(n&1){let t=x();r(0,"div",1)(1,"a",2),b("click",function(){h(t);let a=v();return _(a.resendEmailConfirmationLink())}),s(2," Click here to resend email confirmation link "),o()()}}var ce=class n{constructor(e,t,i,a){this.accountService=e;this.sharedService=t;this.router=i;this.activatedRoute=a}success=!0;ngOnInit(){this.accountService.user$.pipe(w(1)).subscribe({next:e=>{e?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe({next:t=>{let i={token:t.get("token"),email:t.get("email")};this.accountService.confirmEmail(i).subscribe({next:a=>{this.sharedService.showNotification(!0,a.value.title,a.value.message),this.router.navigateByUrl("/account/login")},error:a=>{this.success=!1,this.sharedService.showNotification(!1,"Failed",a.error)}})}})}})}resendEmailConfirmationLink(){this.router.navigateByUrl("/account/send-email/resend-email-confirmation-link")}static \u0275fac=function(t){return new(t||n)(d(N),d(P),d(R),d(k))};static \u0275cmp=F({type:n,selectors:[["app-confirm-email"]],standalone:!0,features:[E],decls:1,vars:1,consts:[["class","container text-center",4,"ngIf"],[1,"container","text-center"],[1,"btn","btn-link",3,"click"]],template:function(t,i){t&1&&p(0,Ae,3,0,"div",0),t&2&&l("ngIf",!i.success)},dependencies:[I]})};function qe(n,e){n&1&&(r(0,"span"),s(1," Resend email confirmation link "),o())}function Ge(n,e){n&1&&(r(0,"span"),s(1," Retrieve your username or password "),o())}function Oe(n,e){n&1&&(r(0,"span",19),s(1," Email is required "),o())}function ze(n,e){n&1&&(r(0,"span",19),s(1," Invalid email address "),o())}function We(n,e){if(n&1&&(r(0,"div",20),f(1,"app-validation-messages",21),o()),n&2){let t=v(2);m(),l("errorMessages",t.errorMessages)}}function $e(n,e){if(n&1){let t=x();r(0,"div",2)(1,"div",3)(2,"main",4)(3,"form",5),b("ngSubmit",function(){h(t);let a=v();return _(a.sendEmail())}),r(4,"div",6)(5,"h1",7),p(6,qe,2,0,"span",8)(7,Ge,2,0,"span",8),o()(),r(8,"div",9),f(9,"input",10),r(10,"label",11),s(11,"Email"),o(),p(12,Oe,2,0,"span",12)(13,ze,2,0,"span",12),o(),p(14,We,2,1,"div",13),r(15,"div",14)(16,"div",15)(17,"div",16)(18,"button",17),s(19," Send "),o()()(),r(20,"div",15)(21,"div",16)(22,"button",18),b("click",function(){h(t);let a=v();return _(a.cancel())}),s(23," Cancel "),o()()()()()()()()}if(n&2){let t,i,a,c=v();m(3),l("formGroup",c.emailForm),m(3),l("ngIf",c.mode.includes("resend-email-confirmation-link")),m(),l("ngIf",c.mode.includes("forgot-username-or-password")),m(2),S("is-invalid",c.submitted&&((t=c.emailForm.get("email"))==null?null:t.errors)),m(3),l("ngIf",c.submitted&&((i=c.emailForm.get("email"))==null?null:i.hasError("required"))),m(),l("ngIf",c.submitted&&((a=c.emailForm.get("email"))==null?null:a.hasError("pattern"))),m(),l("ngIf",c.errorMessages.length>0)}}var de=class n{constructor(e,t,i,a,c){this.accountService=e;this.sharedService=t;this.formBuilder=i;this.router=a;this.activatedRoute=c}emailForm=new U({});submitted=!1;mode;errorMessages=[];ngOnInit(){this.accountService.user$.pipe(w(1)).subscribe({next:e=>{if(e)this.router.navigateByUrl("/");else{let t=this.activatedRoute.snapshot.paramMap.get("mode");t&&(this.mode=t,this.initializeForm())}}})}initializeForm(){this.emailForm=this.formBuilder.group({email:["",[u.required,u.pattern("^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$")]]})}sendEmail(){this.submitted=!0,this.errorMessages=[],this.emailForm.valid&&this.mode&&(this.mode.includes("resend-email-confirmation-link")?this.accountService.resendEmailConfirmationLink(this.emailForm.get("email")?.value).subscribe({next:e=>{this.sharedService.showNotification(!0,e.value.title,e.value.message),this.router.navigateByUrl("/account/login")},error:e=>{e.error.errors?this.errorMessages=e.error.errors:this.errorMessages.push(e.error)}}):this.mode.includes("forgot-username-or-password")&&this.accountService.forgotUsernameOrPassword(this.emailForm.get("email")?.value).subscribe({next:e=>{this.sharedService.showNotification(!0,e.value.title,e.value.message),this.router.navigateByUrl("/account/login")},error:e=>{e.error.errors?this.errorMessages=e.error.errors:this.errorMessages.push(e.error)}}))}cancel(){this.router.navigateByUrl("/account/login")}static \u0275fac=function(t){return new(t||n)(d(N),d(P),d(A),d(R),d(k))};static \u0275cmp=F({type:n,selectors:[["app-send-email"]],standalone:!0,features:[E],decls:2,vars:1,consts:[[1,"mt-5"],["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"card","col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",1,"form-signin",3,"ngSubmit","formGroup"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[4,"ngIf"],[1,"form-floating","mb-3"],["formControlName","email","type","text","placeholder","Email",1,"form-control"],["for","email"],["class","text-danger",4,"ngIf"],["class","form-floatin",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"d-grid"],["type","submit",1,"btn","btn-block","btn-success"],["type","button",1,"btn","btn-block","btn-danger",3,"click"],[1,"text-danger"],[1,"form-floatin"],[3,"errorMessages"]],template:function(t,i){t&1&&(r(0,"div",0),p(1,$e,24,8,"div",1),o()),t&2&&(m(),l("ngIf",i.mode))},dependencies:[ie,I,D,V,B,M,T,j,L,q]})};function Qe(n,e){n&1&&(r(0,"span",19),s(1," New Password is required "),o())}function Ze(n,e){n&1&&(r(0,"span",19),s(1," New Password must be at least 6, and maximum 15 characters "),o())}function Ke(n,e){if(n&1&&(r(0,"div",20),f(1,"app-validation-messages",21),o()),n&2){let t=v(2);m(),l("errorMessages",t.errorMessages)}}function He(n,e){if(n&1){let t=x();r(0,"div",1)(1,"div",2)(2,"main",3)(3,"form",4),b("ngSubmit",function(){h(t);let a=v();return _(a.resetPassword())}),r(4,"div",5)(5,"h1",6),s(6," Change your password "),o()(),r(7,"div",7),f(8,"input",8),r(9,"label",9),s(10,"Email"),o()(),r(11,"div",7),f(12,"input",10),r(13,"label",11),s(14,"New Password"),o(),p(15,Qe,2,0,"span",12)(16,Ze,2,0,"span",12),o(),p(17,Ke,2,1,"div",13),r(18,"div",14)(19,"div",15)(20,"div",16)(21,"button",17),s(22,"Change Password"),o()()(),r(23,"div",15)(24,"div",16)(25,"button",18),s(26,"Cancel"),o()()()()()()()()}if(n&2){let t,i,a,c=v();m(3),l("formGroup",c.resetPasswordForm),m(9),S("is-invalid",c.submitted&&((t=c.resetPasswordForm.get("newPassword"))==null?null:t.errors)),m(3),l("ngIf",c.submitted&&((i=c.resetPasswordForm.get("newPassword"))==null?null:i.hasError("required"))),m(),l("ngIf",c.submitted&&((a=c.resetPasswordForm.get("newPassword"))==null?null:a.hasError("minlength"))||((a=c.resetPasswordForm.get("newPassword"))==null?null:a.hasError("maxlength"))),m(),l("ngIf",c.errorMessages.length>0)}}var ue=class n{constructor(e,t,i,a,c){this.accountService=e;this.sharedService=t;this.formBuilder=i;this.router=a;this.activatedRoute=c}resetPasswordForm=new U({});token;email;submitted=!1;errorMessages=[];ngOnInit(){this.accountService.user$.pipe(w(1)).subscribe({next:e=>{e?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe({next:t=>{this.token=t.get("token"),this.email=t.get("email"),this.token&&this.email?this.initializeForm(this.email):this.router.navigateByUrl("/account/login")}})}})}initializeForm(e){this.resetPasswordForm=this.formBuilder.group({email:[{value:e,disabled:!0}],newPassword:["",[u.required,u.minLength(6),u.maxLength(15)]]})}resetPassword(){if(this.submitted=!0,this.errorMessages=[],this.resetPasswordForm.valid&&this.email&&this.token){let e={token:this.token,email:this.email,newPassword:this.resetPasswordForm.get("newPassword")?.value};this.accountService.resetPassword(e).subscribe({next:t=>{this.sharedService.showNotification(!0,t.value.title,t.value.message),this.router.navigateByUrl("/account/login")},error:t=>{t.error.errors?this.errorMessages=t.error.errors:this.errorMessages.push(t.error)}})}}static \u0275fac=function(t){return new(t||n)(d(N),d(P),d(A),d(R),d(k))};static \u0275cmp=F({type:n,selectors:[["app-reset-password"]],standalone:!0,features:[E],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",1,"form-signin",3,"ngSubmit","formGroup"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"form-floating","mb-3"],["formControlName","email","type","text","placeholder","Email",1,"form-control"],["for","email"],["formControlName","newPassword","type","password","placeholder","New Password",1,"form-control"],["for","newPassword"],["class","text-danger",4,"ngIf"],["class","form-floatin",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"d-grid"],["type","submit",1,"btn","btn-block","btn-success"],["type","button","routerLink","/account/login",1,"btn","btn-block","btn-danger"],[1,"text-danger"],[1,"form-floatin"],[3,"errorMessages"]],template:function(t,i){t&1&&p(0,He,27,6,"div",0),t&2&&l("ngIf",i.token&&i.email)},dependencies:[ie,I,D,V,B,M,T,j,L,q]})};var pe=class{firstName;lastName;userId;accessToken;provider;constructor(e,t,i,a,c){this.firstName=e,this.lastName=t,this.userId=i,this.accessToken=a,this.provider=c}};function Je(n,e){n&1&&(r(0,"span",18),s(1," First name is required "),o())}function Xe(n,e){n&1&&(r(0,"span",18),s(1," First name must be at least 3, and maximum 15 characters "),o())}function Ye(n,e){n&1&&(r(0,"span",18),s(1," Last name is required "),o())}function et(n,e){n&1&&(r(0,"span",18),s(1," Last name must be at least 3, and maximum 15 characters "),o())}function tt(n,e){if(n&1&&(r(0,"div",19),f(1,"app-validation-messages",20),o()),n&2){let t=v(2);m(),l("errorMessages",t.errorMessages)}}function it(n,e){if(n&1){let t=x();r(0,"div",2)(1,"div",3)(2,"main",4)(3,"form",5),b("ngSubmit",function(){h(t);let a=v();return _(a.register())}),r(4,"div",6)(5,"h3",7),s(6," Creating an account using your "),r(7,"span",8),s(8),ye(9,"titlecase"),o()()(),r(10,"div",9),f(11,"input",10),r(12,"label",11),s(13,"First name"),o(),p(14,Je,2,0,"span",12)(15,Xe,2,0,"span",12),o(),r(16,"div",9),f(17,"input",13),r(18,"label",14),s(19,"Last name"),o(),p(20,Ye,2,0,"span",12)(21,et,2,0,"span",12),o(),p(22,tt,2,1,"div",15),r(23,"div",16)(24,"button",17),s(25," Create Account "),o()()()()()()}if(n&2){let t,i,a,c,C,y,g=v();m(3),l("formGroup",g.registerForm),m(5),Se(xe(9,11,g.provider)),m(3),S("is-invalid",g.submitted&&((t=g.registerForm.get("firstName"))==null?null:t.errors)),m(3),l("ngIf",g.submitted&&((i=g.registerForm.get("firstName"))==null?null:i.hasError("required"))),m(),l("ngIf",g.submitted&&((a=g.registerForm.get("firstName"))==null?null:a.hasError("minlength"))||((a=g.registerForm.get("firstName"))==null?null:a.hasError("maxlength"))),m(2),S("is-invalid",g.submitted&&((c=g.registerForm.get("lastName"))==null?null:c.errors)),m(3),l("ngIf",g.submitted&&((C=g.registerForm.get("lastName"))==null?null:C.hasError("required"))),m(),l("ngIf",g.submitted&&((y=g.registerForm.get("lastName"))==null?null:y.hasError("minlength"))||((y=g.registerForm.get("lastName"))==null?null:y.hasError("maxlength"))),m(),l("ngIf",g.errorMessages.length>0)}}var fe=class n{constructor(e,t,i,a){this.accountService=e;this.router=t;this.activatedRoute=i;this.formBuilder=a}registerForm=new U({});submitted=!1;provider=null;access_token=null;userId=null;errorMessages=[];ngOnInit(){this.accountService.user$.pipe(w(1)).subscribe({next:e=>{e?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe({next:t=>{this.provider=this.activatedRoute.snapshot.paramMap.get("provider"),this.access_token=t.get("access_token"),this.userId=t.get("userId"),this.provider&&this.access_token&&this.userId&&(this.provider==="facebook"||this.provider==="google")?this.initializeForm():this.router.navigateByUrl("/account/register")}})}})}initializeForm(){this.registerForm=this.formBuilder.group({firstName:["",[u.required,u.minLength(3),u.maxLength(15)]],lastName:["",[u.required,u.minLength(3),u.maxLength(15)]]})}register(){if(this.submitted=!0,this.errorMessages=[],this.registerForm.valid&&this.userId&&this.access_token&&this.provider){let e=this.registerForm.get("firstName")?.value,t=this.registerForm.get("lastName")?.value,i=new pe(e,t,this.userId,this.access_token,this.provider);this.accountService.registerWithThirdParty(i).subscribe({next:a=>{this.router.navigateByUrl("/")},error:a=>{a.error.errors?this.errorMessages=a.error.errors:this.errorMessages.push(a.error)}})}}static \u0275fac=function(t){return new(t||n)(d(N),d(R),d(k),d(A))};static \u0275cmp=F({type:n,selectors:[["app-register-with-third-party"]],standalone:!0,features:[E],decls:2,vars:1,consts:[[1,"mt-5"],["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"card","col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"ngSubmit","formGroup"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"text-warning"],[1,"form-floating","mb-3"],["formControlName","firstName","type","text","placeholder","First name",1,"form-control"],["for","firstName"],["class","text-danger",4,"ngIf"],["formControlName","lastName","type","text","placeholder","Last name",1,"form-control"],["for","lastName"],["class","form-floatin",4,"ngIf"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],[1,"text-danger"],[1,"form-floatin"],[3,"errorMessages"]],template:function(t,i){t&1&&(r(0,"div",0),p(1,it,26,13,"div",1),o()),t&2&&(m(),l("ngIf",i.provider&&i.access_token&&i.userId))},dependencies:[q,I,D,V,B,M,T,j,L,Ce]})};var vi=[{path:"login",component:ae},{path:"register",component:le},{path:"confirm-email",component:ce},{path:"send-email/:mode",component:de},{path:"reset-password",component:ue},{path:"register/third-party/:provider",component:fe}];export{vi as accountRoutes};
